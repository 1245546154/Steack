DataGuard是甲骨文推出的一种高可用性数据库方案

它是在主节点与备用节点间通过日志同步来保证数据的同步，可以实现数据库快速切换与灾难性恢复。

而主备机之间的数据差异只限于在线日志部分，因此被不少企业用作数据容灾解决方案。



DataGuard是一种数据库级别的HA方案，最主要功能是容灾、数据保护、故障恢复等。

DataGuard分为"物理standby"和"逻辑standby"



1.重做传输服务：
控制重做数据从生产机传输到一个或多个备用库。


2.日志应用服务：
生产库上通过ARCH进程生成归档日志文件，然后传输到备用库，备用库再从归档日志中恢复数据
实时模式时，生产库上的操作通过LGWR进程实时反映在备用库的备用日志文件中，备用库从备用日志文件实时恢复数据。


3.角色切换：
主备库用户角色的切换。




三种保护模式
1.最大保护：
这种模式主备库之间数据是同步的。即主库提交的同时，备库会做相应的恢复。最大限度的保证了数据完整性。不允许数据的丢失。
如果主备库之间网络，或者备库出现问题会直接影响主库操作。导致主库宕机。


2.最大可用性
这种模式和"最大保护"基本上差不多。正常情况下，主备库之间是同步的。
当网络或者备库出现问题时，不会影响到主库的宕机，主库会自动转换库"最大性能"模式，等待备库可用时，将归档传输到备库做恢复。
可以把这种模式理解为"最大保护"和"最大性能"两种模式的中间体。


3.最大性能
这种模式保证主库性能最大化，主备库之间数据是异步传输的。即，主库日志归档以后才会传输到备用库，在备库上使用归档日志文件做恢复操作。

















